<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>JSFJPAHibPrimefaces</title>
</h:head>
<h:body>
	<!-- menu primefaces -->
	<h:form>
		<p:breadCrumb>
			<p:menuitem />
			<p:menuitem value="Página de Entrada" action="index.jsf" />
			<p:menuitem value="Página Primefaces" action="primefaces.jsf" />
		</p:breadCrumb>
	</h:form>
	<h:form id="formCadDependente">
		<h:messages showDetail="true" showSummary="false" id="msg"
			style="color: blue; list-style: none; padding-left: 10px;" />
		<h2>Cadastro de Dependentes</h2>
		<h:panelGrid columns="2">
			<h:outputLabel>Titular: </h:outputLabel>
			<h:outputText value="#{dependenteManagedBean.pessoa.nome}"
				style="color: blue;" />
			<h:outputLabel>Id:</h:outputLabel>
			<h:inputText readonly="true"
				value="#{dependenteManagedBean.dependente.id}" />
			<h:outputLabel>Nome:</h:outputLabel>
			<h:inputText
				value="#{dependenteManagedBean.dependente.nomeDependente}"
				required="true" requiredMessage="Digite seu nome" />
			<h:outputLabel>Grau Parentesco:</h:outputLabel>
			<h:inputText
				value="#{dependenteManagedBean.dependente.grauParentesco}" />
			<h:outputLabel>Idade:</h:outputLabel>
			<h:inputText value="#{dependenteManagedBean.dependente.idade}" />
			<h:outputLabel>Sexo:</h:outputLabel>
			<h:selectOneMenu value="#{dependenteManagedBean.dependente.sexo}">
				<f:selectItem itemValue="Masculino" />
				<f:selectItem itemValue="Feminino" />
			</h:selectOneMenu>
		</h:panelGrid>
		<h:panelGrid columns="3">
			<h:commandButton value="Salvar"
				action="#{dependenteManagedBean.salvar}" />
			<h:commandButton value="Excluir"
				action="#{dependenteManagedBean.excluir}" />
			<h:commandButton value="Limpar"
				action="#{dependenteManagedBean.limpar}" />
		</h:panelGrid>
	</h:form>
	<br />
	<h:form id="formDependentes">
		<br />
		<h:dataTable value="#{dependenteManagedBean.pessoa.dependentes}"
			var="d" cellpadding="15" border="1" cellspacing="0">
			<f:facet name="header">Lista de Dependentes Cadastrados</f:facet>
			<h:column>
				<f:facet name="header">Id</f:facet>
				<h:outputText value="#{d.id}" />
			</h:column>
			<h:column>
				<f:facet name="header">Dependente</f:facet>
				<h:outputText value="#{d.nomeDependente}" />
			</h:column>
			<h:column>
				<f:facet name="header">Grau Parent.</f:facet>
				<h:outputText value="#{d.grauParentesco}" />
			</h:column>
			<h:selectOneMenu value="#{d.sexo}">
				<f:selectItem itemValue="Masculino" />
				<f:selectItem itemValue="Feminino" />
			</h:selectOneMenu>
			<h:column>
				<f:facet name="header">Idade</f:facet>
				<h:outputText value="#{d.idade}" />
			</h:column>
			<h:column>
				<f:facet name="header">Editar</f:facet>
				<h:commandLink immediate="true" id="btEditar">
					<h:graphicImage url="resources/img/edit2.png" width="32" />
					<f:setPropertyActionListener value="#{d}"
						target="#{dependenteManagedBean.dependente}" />
					<f:ajax execute="btEditar" render=":formCadDependente" />
				</h:commandLink>
			</h:column>
			<h:column>
				<f:facet name="header">Excluir</f:facet>
				<h:commandLink immediate="true" id="btExcluir"
					action="#{dependenteManagedBean.excluir}"
					style="text-align: center;">
					<h:graphicImage url="resources/img/delete3.png" width="32" />
					<f:setPropertyActionListener value="#{d}"
						target="#{dependenteManagedBean.dependente}" />
					<f:ajax execute="btExcluir" render="@form" />
				</h:commandLink>
			</h:column>
		</h:dataTable>
	</h:form>
	<script>
		function validaSenhas() {
			var senha1 = document.getElementById("formPessoa:senha").value;
			var senha2 = document.getElementById("formPessoa:senha2").value;
			senha1 = senha1.trim();
			senha2 = senha2.trim();
			var tipoUsuario = document.getElementById("tipoUsuario");

			if (senha1 != senha2 || senha2 === "") {
				alert("Preencha corretamente a senha e a confirmação da senha.");
				return false;
			}
		}
	</script>
</h:body>
</html>